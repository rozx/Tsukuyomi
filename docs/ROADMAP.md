# Tsukuyomi - Moonlit Translator

Tsukuyomi - Moonlit Translator

## AI 管理

本项目使用 AI 来辅助翻译日本小说文本为简体中文。AI 的管理和调用通过以下方式实现：

- ✅ 支持OPENAI协议的模型调用
- ✅ 支持Gemini协议的模型调用

### 界面

- ✅ 可用的AI列表
  - ✅ 显示已配置的AI模型
  - ✅ 支持添加、编辑和删除AI模型
  - ✅ 默认使用的AI模型(翻译、校对、润色、角色设定提取、术语提取)
  - ✅ 每个AI可以使用的不同模型配置，其中不同的limit可以通过询问AI来获取
    - ✅ 模型名称
    - ✅ 温度
    - ✅ 最大Token数
    - ✅ API Key等
    - ✅ 地址
- ✅ AI思考过程
  - ✅ 显示AI翻译时的思考过程和中间步骤
  - ✅ 支持查看AI任务的实时状态和进度
  - ✅ 支持任务管理和历史记录

## 书籍管理

- ✅ 支持添加、编辑和删除书籍
- ✅ 支持查看书籍详情，包括章节列表和翻译状态
- ✅ 支持导入和导出书籍数据
  - ✅ 支持从文本文件导入章节
  - ✅ 支持导出为文本文件
  - ✅ 支持备份和恢复书籍数据
  - ✅ 支持从网络获取章节
- ✅ 支持书籍分类和标签管理
- ✅ 书籍插画、封面管理
  - ✅ 支持为书籍添加封面图片
  - ✅ 支持为章节添加插画图片
  - ✅ 支持图片的上传和管理 （使用https://p.sda1.dev/）
  - ⚠️ 支持图片的本地缓存和优化（部分实现：封面历史记录）

### 翻译页面

- ✅ 支持章节列表查看和选择
- ✅ 支持添加章节、大章、小节以及话
- ✅ 支持章节内容的编辑和保存
- ✅ 支持章节内容的翻译、校对和润色
  - ✅ 以段落为单位进行翻译
  - ✅ 如果单次翻译内容过长，支持自动拆分为多段进行翻译
  - ✅ 支持翻译进度显示和中断
  - ⚠️ 支持翻译结果的质量评估和反馈（部分实现：降级检测）
  - ✅ 可以选择单个段落进行重新翻译
- ✅ 支持章节内容的AI辅助翻译
- ⚠️ 支持章节内容的版本管理和历史记录（部分实现：翻译历史记录）
- ✅ 支持章节内容的导入和导出
- ✅ 支持章节内容的格式化和排版
- ✅ 支持章节内容的术语和角色设定提取
  - ✅ 使用AI在翻译时提取术语和角色设定

### AI 工具

- ❌ 添加StoreMemory工具，用于存储AI的上下文记忆
- ✅ AI思考过程面板（显示AI翻译时的思考过程）
- ✅ 翻译历史对话框（查看段落的所有翻译版本）
- ✅ AI任务管理和进度跟踪（支持多个并发任务）
- ✅ AI助手聊天功能
  - ✅ 支持与AI进行对话
  - ✅ 支持聊天会话管理（创建、删除、切换会话）
  - ✅ 支持上下文关联（书籍、章节、段落）
  - ✅ 支持Markdown渲染
  - ✅ 支持自动会话总结（当消息过多时）
  - ✅ 支持术语和角色设定的CRUD操作

## 数据同步

- ✅ GitHub Gist 同步
  - ✅ 支持将数据同步到 GitHub Gist
  - ✅ 支持从 Gist 下载数据
  - ✅ 支持自动同步（可配置同步间隔）
  - ✅ 支持冲突检测和解决
  - ✅ 支持同步状态显示
  - ✅ 支持手动触发同步

## 其他功能

- ✅ 设置管理
  - ✅ 应用设置（并发限制、默认模型等）
  - ✅ 设置导入/导出（JSON格式）
  - ✅ 多标签页设置界面
- ✅ Toast 通知历史
  - ✅ 自动保存操作历史
  - ✅ 支持撤销操作
  - ✅ 未读消息计数
- ✅ 搜索和替换
  - ✅ 在章节内容中搜索文本
  - ✅ 支持替换功能
- ✅ 并发控制
  - ✅ 限制API调用并发数
  - ✅ 支持进度回调
- ✅ 多网站爬虫支持
  - ✅ 小説家になろう (ncode.syosetu.com)
  - ✅ 小説家になろう R18 (novel18.syosetu.com)
  - ✅ カクヨム (kakuyomu.jp)
  - ✅ Syosetu.org (syosetu.org)
- ✅ 上下文管理
  - ✅ 管理AI操作的上下文信息
  - ✅ 支持书籍、章节、段落级别的上下文
