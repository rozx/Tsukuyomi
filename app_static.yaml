alerts:
  - rule: DEPLOYMENT_FAILED
  - rule: DOMAIN_FAILED
domains:
  - domain: tsukuyomi.rozx.moe
    type: PRIMARY
features:
  - buildpack-stack=ubuntu-22
ingress:
  rules:
    - component:
        name: Tsukuyomi
      cors:
        allow_methods:
          - GET
          - POST
          - PUT
          - PATCH
          - DELETE
          - OPTIONS
        allow_origins:
          - regex: .*
      match:
        authority:
          exact: ''
        path:
          prefix: /
name: tsukuyomi-static
region: sgp
static_sites:
  - build_command: bun install && bun run build:spa
    catchall_document: index.html
    environment_slug: bun
    github:
      branch: main
      deploy_on_push: true
      repo: rozx/Tsukuyomi
    name: Tsukuyomi
    output_dir: dist/spa
    source_dir: /
