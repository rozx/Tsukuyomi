# 发布说明 - v0.7.14

## 版本信息
- **版本号**: 0.7.14
- **发布日期**: 2025年12月23日

---

## 🎉 新功能

### 1. 术语翻译服务
- **独立术语翻译功能**：
  - 新增 `TermTranslationService`，提供专门的术语翻译服务
  - 支持独立的术语翻译任务类型（`termsTranslation`），与普通翻译任务分离
  - 提供专门的术语翻译工具集，只包含获取上下文相关的工具（书籍信息、术语表、角色表、记忆、段落搜索）
  - 优化术语翻译的提示词，专注于术语的准确性和一致性
- **上下文感知翻译**：
  - 支持获取书籍、章节、术语表、角色表等上下文信息
  - 支持搜索记忆和历史翻译，确保术语翻译的一致性
  - 支持搜索段落了解术语在上下文中的使用方式
  - 自动使用术语表和角色表确保翻译一致性
- **任务管理集成**：
  - 支持与 AI 处理任务系统集成，自动创建和管理术语翻译任务
  - 支持实时显示翻译进度和思考过程
  - 支持流式输出和取消操作

### 2. 术语翻译 UI 集成
- **输入组件增强**：
  - 在 `TranslatableInput` 组件中集成术语翻译功能
  - 在 `TranslatableChips` 组件中集成术语翻译功能
  - 支持一键翻译术语，自动使用配置的术语翻译模型
  - 提供翻译结果对话框，显示翻译结果
- **模型选择优化**：
  - 自动筛选可用的术语翻译模型
  - 使用默认的术语翻译模型配置
  - 提供清晰的错误提示，引导用户配置术语翻译模型

### 3. AI 模型设置增强
- **术语翻译任务配置**：
  - 在 AI 模型设置中新增术语翻译任务类型配置
  - 支持为每个模型独立配置术语翻译任务的启用状态和温度参数
  - 支持设置默认的术语翻译模型
  - 在 AI 页面中显示术语翻译任务选项

---

## 🔧 改进与优化

### 提示词系统优化
- **术语翻译规则明确**：
  - 在数据管理规则中明确术语翻译规则：每个术语只能有一个翻译
  - 禁止使用多个翻译选项（如"路人角色／龙套"），应选择一个最合适的翻译
  - 优化术语翻译的提示词结构，提升翻译准确性

### 工具权限管理
- **术语翻译工具限制**：
  - 术语翻译服务只能使用获取上下文相关的工具
  - 禁止使用修改数据的工具（如创建/更新术语、角色等），确保术语翻译的专注性
  - 优化工具调用逻辑，提升服务安全性

### 服务架构优化
- **服务分离**：
  - 将术语翻译功能从普通翻译服务中分离，提供更专业的术语翻译能力
  - 优化服务接口设计，支持不同的任务类型配置
  - 改进错误处理和任务管理逻辑

---

## 🐛 问题修复

### 术语翻译相关问题
- **翻译一致性**：
  - 修复术语翻译中可能出现多个翻译选项的问题
  - 改进术语翻译的验证逻辑，确保返回单一翻译结果
  - 优化 JSON 解析和重试机制，提升翻译成功率

---

## 📝 技术细节

### 主要修改文件
- `src/services/ai/tasks/term-translation-service.ts`：新增术语翻译服务（+478 行）
- `src/services/ai/tools/index.ts`：新增术语翻译工具集获取方法（+30 行）
- `src/components/translation/TranslatableInput.vue`：集成术语翻译功能（+50 行，-部分代码）
- `src/components/translation/TranslatableChips.vue`：集成术语翻译功能（+50 行，-部分代码）
- `src/components/dialogs/AIModelDialog.vue`：新增术语翻译任务配置（+30 行，-部分代码）
- `src/services/ai/tasks/prompts/index.ts`：优化术语翻译规则说明（+5 行，-部分代码）
- `src/models/novel.ts`：新增术语翻译任务配置类型（+2 行）
- `src/constants/ai/index.ts`：新增术语翻译任务类型常量（+2 行）
- `src/stores/ai-processing.ts`：新增术语翻译任务类型（+1 行）
- `src/services/settings-service.ts`：支持术语翻译任务配置验证（+1 行）
- `src/services/ai/types/ai-model.ts`：新增术语翻译任务配置类型（+1 行）
- `src/pages/AIPage.vue`：新增术语翻译任务选项（+10 行，-部分代码）
- `src/models/settings.ts`：支持术语翻译任务配置（+1 行）
- `src/components/settings/AIModelSettingsTab.vue`：新增术语翻译任务标签（+1 行）
- `package.json`：版本号更新至 0.7.14（+2 行，-1 行）
- `src/constants/version.ts`：版本号更新至 0.7.14（+2 行，-1 行）

### 新增功能统计
- **新增功能**: 3 项
- **改进优化**: 3 项
- **问题修复**: 1 项
- **代码变更**: 约 700 行新增，50 行删除
- **修改文件**: 16 个文件

---

## 🎯 用户体验改进

1. **术语翻译专业化**：新增的术语翻译服务提供了更专业、更准确的术语翻译能力，特别适合需要精确翻译术语的场景
2. **翻译一致性提升**：通过上下文感知和术语表集成，确保术语翻译在整个项目中的一致性
3. **操作便捷性**：在输入组件中直接集成术语翻译功能，用户可以快速翻译术语，无需切换到其他界面
4. **配置灵活性**：支持为每个模型独立配置术语翻译任务，用户可以根据需要选择最适合的模型
5. **任务管理优化**：术语翻译任务与普通翻译任务分离，提供更清晰的任务管理和进度跟踪

---

## 🔄 升级建议

本次更新主要聚焦于：

1. **术语翻译专业化**：新增的术语翻译服务提供了更专业、更准确的术语翻译能力，特别适合需要精确翻译术语的用户
2. **翻译一致性**：通过上下文感知和术语表集成，确保术语翻译在整个项目中的一致性，特别适合需要保持术语翻译一致性的用户
3. **操作便捷性**：在输入组件中直接集成术语翻译功能，用户可以快速翻译术语，特别适合需要频繁翻译术语的用户
4. **配置灵活性**：支持为每个模型独立配置术语翻译任务，用户可以根据需要选择最适合的模型，特别适合需要精细控制翻译模型的用户

建议所有用户升级以获得更好的使用体验。特别是对于需要精确翻译术语或需要保持术语翻译一致性的用户，本次更新将显著提升使用体验。

---

## 📚 相关文档

- 项目架构文档：`AGENTS.md`
- 翻译指南：`docs/TRANSLATION_GUIDE.md`
- 主题指南：`docs/THEME_GUIDE.md`
- 批量替换示例：`docs/batch-replace-examples.md`

---

## 🙏 致谢

感谢所有为本次版本做出贡献的开发者。

---

*本文档由自动化工具生成，如有疑问请提交 Issue。*

