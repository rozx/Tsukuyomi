# 🤖 AI 翻译功能详解

书籍详情页集成了强大的 AI 翻译功能,支持章节级和段落级的翻译、润色和校对。

## 🎯 AI 翻译类型

### 1. 翻译 (Translation)

将原文从源语言翻译为目标语言。

**特点**:

- 基于上下文理解的翻译
- 自动应用术语库和角色设定
- 保持原文的语气和风格
- 支持多种翻译策略

### 2. 润色 (Polish)

对现有译文进行优化和润色。

**特点**:

- 改善译文的流畅度
- 优化用词和表达
- 保持原意不变
- 提升整体阅读体验

### 3. 校对 (Proofreading)

检查和修正译文中的错误。

**特点**:

- 修正语法错误
- 检查标点符号
- 统一术语使用
- 修正错别字

## 📖 章节级翻译

### 翻译整个章节

**操作步骤**:

1. 选择要翻译的章节
2. 点击工具栏的"翻译"按钮
3. 在下拉菜单中选择:
   - **翻译全部**: 翻译所有段落
   - **翻译未译**: 只翻译未翻译的段落
   - **重译全部**: 重新翻译所有段落(创建新版本)
4. 选择后 AI 开始翻译

**翻译策略**:

- **翻译全部** (Translate All):
  - 适用场景: 新章节、完全未翻译的章节
  - 效果: 为每个段落创建译文
  - 对于已有译文的段落,会创建新的译文版本

- **翻译未译** (Translate Untranslated):
  - 适用场景: 部分翻译的章节
  - 效果: 只翻译没有译文的段落
  - 跳过已有译文的段落

- **重译全部** (Retranslate All):
  - 适用场景: 需要更新整个章节的译文
  - 效果: 为所有段落创建新的译文版本
  - 保留旧版本,可以对比和选择

### 润色整个章节

**操作步骤**:

1. 确保章节已有译文
2. 点击工具栏的"润色"按钮(或从翻译下拉菜单选择)
3. AI 会对所有已译段落进行润色
4. 润色后的内容会更新当前译文版本

**润色建议**:

- 先完成初译,再进行润色
- 可以对同一章节多次润色
- 润色会保留原译文的主要意思

### 校对整个章节

**操作步骤**:

1. 确保章节已有译文
2. 点击工具栏的"校对"按钮(或从翻译下拉菜单选择)
3. AI 会检查并修正译文中的错误
4. 校对后的内容会更新当前译文版本

**校对范围**:

- 语法错误
- 标点符号
- 拼写错误
- 术语一致性
- 格式规范

## 📝 段落级翻译

### 翻译单个段落

**操作步骤**:

1. 找到要翻译的段落
2. 点击段落工具栏的"翻译"按钮(🔄 图标)
3. AI 开始翻译该段落
4. 翻译完成后会创建新的译文版本

**段落翻译的优势**:

- 快速翻译特定段落
- 灵活控制翻译范围
- 方便对比不同版本

### 润色单个段落

**操作步骤**:

1. 找到要润色的段落(必须已有译文)
2. 点击段落工具栏的"润色"按钮(✨ 图标)
3. AI 对当前译文进行润色
4. 润色后会更新当前译文版本

### 校对单个段落

**操作步骤**:

1. 找到要校对的段落(必须已有译文)
2. 点击段落工具栏的"校对"按钮(✓ 图标)
3. AI 检查并修正译文
4. 校对后会更新当前译文版本

## 📊 翻译进度显示

### 翻译进度面板

在进行章节级翻译时,可以选择显示翻译进度面板:

**操作步骤**:

1. 点击工具栏右侧的"显示/隐藏翻译进度"按钮（列表图标 📝）。
2. 右侧会展开翻译进度面板
3. 实时显示翻译状态

**面板内容**:

- **进度百分比**: 当前完成的百分比
- **已完成段落**: 已翻译的段落数量
- **总段落数**: 章节的总段落数量
- **预计剩余时间**: 根据当前速度估算
- **当前操作**: 正在翻译的段落编号
- **错误信息**: 如果有翻译失败的段落

### 进度状态

**翻译中**:

- 进度条动态更新
- 显示当前翻译的段落编号
- 可以随时取消翻译

**润色中**:

- 进度条显示润色进度
- 显示当前润色的段落编号
- 可以随时取消润色

**校对中**:

- 进度条显示校对进度
- 显示当前校对的段落编号
- 可以随时取消校对

### 取消翻译

**操作步骤**:

1. 在翻译进度面板中找到"取消"按钮
2. 点击"取消"按钮
3. 系统会停止当前的 AI 操作
4. 已完成的段落会保留翻译结果

**取消后的状态**:

- 已翻译的段落保留译文
- 未翻译的段落保持原状
- 可以重新开始翻译

## ⚙️ 翻译配置

### 章节特殊指令

为特定章节设置自定义的翻译指令:

**操作步骤**:

1. 方式一（推荐）：点击章节上方阅读工具栏中的"翻译设置"按钮（⚙️ 图标）。
2. 方式二：在左侧章节列表中，点击章节旁的"编辑"按钮（✏️ 图标），在弹出的对话框中找到指令设置。
3. 在"翻译设置"面板或对话框中设置：
   - **翻译指令**: 翻译时的额外要求
   - **润色指令**: 润色时的注意事项
   - **校对指令**: 校对时的检查重点

**指令示例**:

_翻译指令_:

```
保持古风的语言风格,使用文言文的句式。
注意保留诗词的韵律和意境。
```

_润色指令_:

```
强调情感表达,让译文更有感染力。
简化复杂的句子结构,提高可读性。
```

_校对指令_:

```
重点检查人名和地名的一致性。
确保对话标点符号使用正确。
```

### 全局翻译设置

在 AI 模型配置页面设置全局翻译参数:

**基本设置**:

- **默认翻译模型**: 选择用于翻译的 AI 模型
- **默认润色模型**: 选择用于润色的 AI 模型
- **默认校对模型**: 选择用于校对的 AI 模型

**高级设置**:

- **温度**: 控制翻译的创造性(0.0 - 1.0)
- **最大 Token 数**: 限制每次请求的长度
- **批处理大小**: 同时处理的段落数量

详细配置请参考 "AI 模型配置指南"。

## 📚 术语库和角色设定

### 自动应用术语

AI 翻译时会自动应用术语库:

**应用方式**:

- 检测原文中的术语
- 使用对应的译文替换
- 保持术语翻译的一致性

### 自动应用角色设定

AI 翻译时会参考角色设定:

**应用方式**:

- 识别角色名称和别名
- 使用正确的译名
- 参考角色的语言风格

**角色信息利用**:

- 角色名称和译名
- 角色性别和描述
- 语言风格（口癖等）
- 别名列表

## 🔗 上下文管理

### 章节上下文

AI 翻译会考虑以下上下文:

**章节内上下文**:

- 前后段落的内容
- 章节摘要
- 章节特殊指令

**书籍级上下文**:

- 书籍简介
- 术语库
- 角色设定
- 记忆库

### 摘要功能

为章节生成摘要,帮助 AI 更好地理解上下文:

**生成摘要**:

1. 选择章节
2. 在章节内容区域找到"生成摘要"按钮
3. 点击按钮,AI 会分析章节内容
4. 生成的摘要会保存到章节

**摘要的作用**:

- 提供章节的整体概况
- 帮助 AI 理解剧情走向
- 保持翻译的连贯性

**重新生成摘要**:

- 在章节内容有重大修改后
- 点击"重新生成摘要"按钮
- AI 会基于最新内容更新摘要

## ⭐ 翻译质量优化

### 多轮翻译

对于重要章节,可以采用多轮翻译策略:

**第一轮**:

- 使用"翻译全部"获得初译
- 快速完成整个章节的翻译
- 不追求完美,注重速度

**第二轮**:

- 使用"润色"优化译文
- 改善表达和流畅度
- 可以多次润色

**第三轮**:

- 使用"校对"检查错误
- 修正语法和标点
- 统一术语使用

**第四轮**:

- 人工精校
- 修改 AI 未能处理好的部分
- 最终定稿

### 对比与选择

利用译文多版本功能:

**创建多个版本**:

1. 使用不同的 AI 模型翻译同一章节
2. 或使用不同的翻译策略
3. 系统会为每次翻译创建新版本

**对比版本**:

1. 在段落下方的译文选择器中切换版本
2. 对比不同版本的翻译质量
3. 选择最佳的版本作为当前译文

**混合使用**:

- 可以为每个段落选择不同的译文版本
- 灵活组合,形成最优的整体译文

### 人工干预

AI 翻译后的人工优化建议:

**检查重点**:

- 专有名词的翻译
- 文化相关内容的处理
- 双关语和梗的翻译
- 诗词和歌词的韵律

**建议修改方式**:

- 直接编辑译文
- 使用搜索替换批量修改
- 更新术语库,重新翻译

## 🔄 批处理策略

### 批量翻译多个章节

虽然需要逐章翻译,但可以提高效率:

**快速流程**:

1. 选择第一个章节
2. 点击"翻译全部"
3. 显示翻译进度面板
4. 翻译完成后,选择下一章节
5. 重复步骤2-4

**建议**:

- 一次性翻译5-10个章节
- 然后统一进行润色
- 最后统一校对

### 夜间批处理

对于大量章节:

**操作建议**:

1. 睡前选择第一个章节
2. 使用"翻译全部"
3. 让系统自动翻译
4. 第二天早上检查结果

**注意事项**:

- 确保电脑不会休眠
- 检查 API 配额是否充足
- 留意错误处理

## ⚠️ 错误处理

### 翻译失败

如果段落翻译失败:

**显示**:

- 段落会显示错误图标
- 鼠标悬停可以查看错误信息

**处理**:

- 检查 API 密钥是否有效
- 检查网络连接
- 重试翻译该段落

**常见错误**:

- API 配额用尽
- 网络超时
- 模型不可用
- 内容违反政策

### 部分失败

章节翻译时部分段落失败:

**状态**:

- 翻译进度面板显示失败数量
- 失败的段落保持未翻译状态

**处理**:

- 完成翻译后,单独处理失败的段落
- 检查并修复错误原因
- 手动重试失败的段落

## 💰 Token 消耗管理

### 优化 Token 使用

**减少消耗**:

- 简化章节摘要
- 只包含相关的术语和角色
- 使用更高效的模型
- 调整翻译块大小（Chunk Size）

**批量处理**:

- 批量翻译可以共享上下文
- 减少重复的系统提示
- 提高整体效率

## 💡 最佳实践

### 翻译工作流

**新书籍翻译**:

1. 导入书籍结构
2. 设置术语库和角色设定
3. 生成章节摘要
4. 从第一章开始翻译
5. 定期润色和校对
6. 人工精校重要章节

**已有书籍更新**:

1. 使用"从在线获取更新"
2. 只翻译新增章节
3. 保持术语和风格一致性
4. 对比新旧章节的翻译质量

### 质量控制

**三步验证法**:

1. **机器翻译**: 使用 AI 快速翻译
2. **机器润色**: 使用 AI 优化译文
3. **人工校对**: 人工检查和修正

**重点检查**:

- 人名、地名的一致性
- 专有名词的准确性
- 语法和标点的正确性
- 译文的流畅度和可读性

### 避免常见问题

- ❌ 不设置术语库直接翻译
- ❌ 不生成章节摘要
- ❌ 翻译完就直接导出,不检查质量
- ✓ 先设置好术语和角色
- ✓ 利用章节摘要提供上下文
- ✓ 多轮翻译,逐步提升质量
- ✓ 人工检查AI翻译的重要内容

## ❓ 常见问题

### 为什么翻译结果不理想?

1. 检查术语库是否完善
2. 确认是否生成了章节摘要
3. 尝试使用更高级的 AI 模型
4. 检查章节特殊指令是否恰当

### 如何提高翻译速度?

1. 使用更快的 AI 模型
2. 增加并发翻译的段落数量
3. 使用"翻译未译"避免重复翻译
4. 优化章节摘要和上下文长度

### 翻译中断后如何继续?

1. 重新选择章节
2. 使用"翻译未译"功能
3. 系统会跳过已翻译的段落
4. 只翻译剩余的段落

### 如何保证术语翻译一致?

1. 完善术语库
2. 在开始翻译前设置好所有术语
3. 翻译后使用搜索功能检查一致性
4. 必要时使用替换功能统一术语

### 可以使用不同的模型翻译不同章节吗?

可以。在 AI 模型配置页面,可以:

1. 为不同任务配置不同的默认模型
2. 在翻译前临时切换模型
3. 为特定章节使用特定模型

建议保持整本书使用相同的翻译模型,以保证风格一致性。
