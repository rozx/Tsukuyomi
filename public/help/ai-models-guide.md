# 🤖 AI 模型配置指南

本文档说明当前版本中 AI 模型页面与模型对话框的真实功能。

---

## 📋 页面能力

在 **AI 模型管理** 页面，你可以：

- 搜索模型（名称 / 提供商 / 模型 ID / 默认任务）
- 添加模型
- 编辑模型
- 复制模型（副本默认禁用）
- 删除模型（确认后执行，支持撤销）
- 查看模型卡片信息（温度、最大 Token、脱敏 API Key、基础地址、默认任务）

分页支持：`5 / 10 / 20 / 50` 每页。

---

## 🏢 当前支持的提供商

系统内置提供商仅有：

- `OpenAI`
- `Gemini`

> 说明：如需接入 OpenAI 兼容接口服务，可在提供商选择 `OpenAI` 并填写对应 `baseUrl` 与模型 ID。

---

## ➕ 添加模型

点击“添加 AI 模型”后，在弹窗中填写：

1. **启用模型**（开关）
2. **模型名称**（必填）
3. **温度**（0~2）
4. **提供商**（OpenAI/Gemini）
5. **API Key**（必填）
6. **基础地址**：
   - OpenAI：必填
   - Gemini：不需要填写
7. **模型标识**（必填，可从列表选，也可手输）

当 API Key（及 OpenAI 的 baseUrl）满足条件后，可点击“刷新列表”拉取可用模型。

---

## ⚙️ AI 配置信息区

弹窗中可点击 **获取配置**，用于验证连接并尝试读取模型信息。

相关字段：

- **最大输入 Token**（`maxTokens`，0 表示无限制）
- **上下文窗口**（`contextWindow`，可选）

读取成功后会显示“从 AI 获取”的提示值，便于对照与调整。

---

## 🎯 默认任务设置

每个模型可独立勾选是否用于以下任务，并可为每项单独设置温度：

- 翻译
- 校对/润色（同一任务项）
- 术语翻译 / 章节摘要
- 助手

> 这些“可用于任务”的开关会影响该模型是否出现在对应任务的默认模型选择中。

---

## 🔍 搜索与展示细节

搜索框会实时过滤以下内容：

- 模型名称
- 提供商（OpenAI / Gemini）
- 模型 ID
- 默认任务文案

模型卡片会显示：

- 提供商与模型 ID
- 启用状态（已启用/已禁用）
- 温度、最大 Token
- 脱敏 API Key（仅显示前缀）
- 基础地址
- 默认任务汇总

---

## 💡 使用建议（基于当前实现）

1. 至少配置一个“助手”默认模型，否则右侧聊天助手无法发送消息。
2. 为“翻译”和“校对/润色”分别配置不同温度，便于稳定性与表达效果平衡。
3. 复制模型后先在副本上调参测试，确认效果后再启用。
4. 定期清理不再使用的模型，避免任务模型选择列表过长。

---

## ❓ 常见问题

**Q: 为什么 Gemini 不需要基础地址？**

A: 当前实现对 Gemini 使用固定接入方式，弹窗中会隐藏 baseUrl 输入。

**Q: 复制的模型为什么不能直接用？**

A: 复制模型默认是“已禁用”，需要进入编辑后启用。

**Q: 助手发送按钮是灰色的？**

A: 通常是未配置“助手默认模型”或当前无可用助手模型。

**Q: 删除后能恢复吗？**

A: 可以，在成功通知出现期间点击“撤销”可恢复。
