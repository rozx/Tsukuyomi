# 📚 书籍列表页使用指南

书籍列表页是 Tsukuyomi 的核心页面之一，您可以在这里查看、管理、搜索和组织您的所有翻译书籍项目。

---

## 📖 页面概览

书籍列表页提供了强大的书籍管理功能：

- 📦 **全面展示**: 以网格视图展示所有书籍，每本书都有精美的卡片设计
- 🔍 **灵活搜索**: 支持按标题、别名、作者、描述、标签快速搜索
- 📊 **多维排序**: 12 种排序方式满足不同查找需求
- ⚡ **批量操作**: 支持添加、编辑、删除、导入导出等多种操作

---

## 🔍 搜索功能

### 🔍 搜索范围

搜索框支持在以下字段中查找：

- 📝 **书籍标题**: 主标题
- 🏷️ **别名**: 所有备用标题
- 👤 **作者**: 原作者名称
- 📄 **简介**: 书籍描述内容
- 🏷️ **标签**: 所有分类标签

### 使用方法

1. 在页面右上角的搜索框中输入关键词
2. 搜索结果会实时过滤显示
3. 点击搜索框右侧的 ❌ 按钮快速清除搜索

> **提示**: 搜索不区分大小写，支持中英文混合搜索。

---

## 🔄 排序功能

点击 **排序** 按钮可选择以下排序方式：

### 🔄 基础排序

- 📅 **默认**: 按创建时间倒序（最新创建的在前）
- 🔤 **标题 (A-Z)**: 按书名字母顺序升序
- 🔤 **标题 (Z-A)**: 按书名字母顺序降序

### ⏰ 时间排序

- 🆕 **创建时间 (最新)**: 最近添加的书籍排在前面
- 📅 **创建时间 (最早)**: 最早添加的书籍排在前面
- ✏️ **更新时间 (最新)**: 最近编辑的书籍排在前面（默认推荐）
- ⏳ **更新时间 (最早)**: 最久未更新的书籍排在前面

### 📊 内容排序

- 📑 **章节数 (多→少)**: 按章节数量从多到少
- 📄 **章节数 (少→多)**: 按章节数量从少到多
- 📝 **字数 (多→少)**: 按总字数从多到少
- 📝 **字数 (少→多)**: 按总字数从少到多

### ⭐ 特殊排序

- ⭐ **收藏优先**: 收藏的书籍排在最前，其余按更新时间排序

> **提示**: 当前选择的排序方式会在菜单项旁显示 ✓ 标记。

---

## ➕ 添加书籍

### 📝 方式一：手动添加

点击 **添加书籍** 主按钮可以手动创建新书籍：

**步骤**:

1. 点击 **添加书籍** ➕ 按钮
2. 填写书籍信息（详见表单字段说明）
3. 点击 **保存** 💾 完成创建

**可填写字段**:

- 📖 **标题** ✱ (必填): 书籍主标题
- 🏷️ **别名**: 其他译名、简称或原文标题
- 👤 **作者**: 原作者名称
- 📄 **简介**: 书籍描述或剧情梗概
- 🏷️ **标签**: 分类标签（如"轻小说"、"奇幻"）
- 🖼️ **封面**: 上传或粘贴封面图片
- 🔗 **网站链接**: 原文网站地址
- 📑 **章节/卷**: 手动创建章节结构

**🔧 高级选项**:

- 🌐 **翻译指令**: 针对该书籍的特殊翻译要求
- ✨ **润色指令**: 润色任务的额外说明
- ✓ **校对指令**: 校对任务的特殊要求

### 🌐 方式二：从网站导入

点击分割按钮的下拉箭头选择 **从网站导入** 🌐：

**支持的网站**:

- 📖 **小説家になろう** - `syosetu.com`
- 📚 **カクヨム** - `kakuyomu.jp`
- 🌸 **ハーメルン** - `syosetu.org`

**操作流程**:

1. 📋 复制小说页面的 URL
2. 点击下拉菜单选择 **从网站导入** 🌐
3. 在弹出的抓取对话框中粘贴 URL 并点击 **获取书籍信息** 🔍
4. 🤖 系统会自动抓取元数据和章节列表
5. **筛选章节**: 您可以通过勾选、全选或输入索引范围来灵活选择需要导入的章节
6. 确认信息无误后，点击 **导入** ⬇️ 即可批量导入选中的章节

> ⚠️ **注意**: 网络抓取可能需要较长时间，请耐心等待。大型作品建议分批导入章节。

### 📦 方式三：从 JSON 导入

点击分割按钮的下拉箭头选择 **从 JSON 导入** 📦：

**支持的格式**:

- 📄 单本书籍的 JSON 对象
- 📚 书籍数组
- 📋 包含 `novels` 或 `novel` 字段的 JSON

**操作流程**:

1. 点击下拉菜单选择 **从 JSON 导入** 📦
2. 📂 选择 `.json` 或 `.txt` 文件
3. 🤖 系统会自动解析并导入书籍

> 💡 **提示**: 导入成功后会显示成功数量，并支持撤销操作。

---

## 📚 书籍卡片

每本书以精美的卡片形式展示，包含以下信息：

### 封面区域

- 显示书籍封面图片
- 如无封面则显示默认占位图
- **点击封面** 可跳转到书籍详情页
- 悬停时封面会轻微放大

### 基本信息

- **标题**: 显示书名（最多 2 行）
- **作者**: 原作者名称（如有）

### 统计数据

显示在卡片底部的信息面板：

- **章节**: 该书的总章节数
- **字数**: 该书的总字符数（自动统计）
- **创建**: 书籍创建时间（相对时间显示）
- **更新**: 最后编辑时间（相对时间显示）

> **注意**: 字数统计可能在加载时显示骨架屏，这是正常现象。

### 操作按钮

每张卡片底部提供三个快捷操作：

1. **⭐ 收藏/取消收藏**
   - 点击星标图标切换收藏状态
   - 收藏的书籍图标为金色填充

2. **✏️ 编辑**
   - 打开编辑对话框
   - 可修改书籍的所有信息

3. **🗑️ 删除**
   - 打开删除确认对话框
   - 需要输入书名确认删除（防止误删）

---

## ✏️ 编辑书籍

点击书籍卡片的 **编辑** 按钮可修改书籍信息：

**可编辑内容**:

- 所有基本信息（标题、作者、简介等）
- 封面图片
- 翻译/润色/校对指令
- 章节结构和内容

**编辑流程**:

1. 点击 **编辑** 按钮
2. 修改需要更改的字段
3. 点击 **保存** 应用更改

> **提示**: 编辑操作支持撤销，如误操作可点击提示中的"撤销"按钮。

---

## 🗑️ 删除书籍

为防止误删，删除操作需要二次确认：

**安全删除流程**:

1. 点击书籍卡片的 **删除** 按钮
2. 在确认对话框中查看书名
3. 在输入框中**完整输入书名**（必须完全匹配）
4. 点击 **删除** 按钮完成删除

**便捷功能**:

- 点击输入框右侧的 📋 **复制** 按钮可自动填充书名
- 复制后的书名会同时保存到剪贴板

> **警告**: 删除操作会删除该书籍的所有数据，包括章节、翻译、润色等内容。删除后支持在提示中点击"撤销"恢复。

---

## ⭐ 收藏功能

收藏（星标）功能可帮助您标记重要或常用的书籍：

**操作方式**:

- 点击书籍卡片底部的 **星标** 图标

**收藏优势**:

- 在排序菜单中选择 **收藏优先** 可将收藏的书籍置顶
- 主页统计会显示收藏书籍数量
- 便于快速访问正在翻译的重点项目

---

## 📋 书籍列表视图

### 网格布局

书籍以响应式网格展示，根据屏幕宽度自动调整：

- **2K+ 屏幕**: 每行 7 本
- **大屏**: 每行 6 本
- **笔记本**: 每行 5 本
- **普通屏幕**: 每行 4 本
- **平板**: 每行 3 本
- **手机**: 每行 2 本

### 分页功能

当书籍数量较多时，底部会显示分页器：

- 默认每页显示 20 本
- 可选择每页 10/20/50/100 本
- 支持跳转到首页、末页、指定页码

---

## 💡 使用技巧

### 快速定位书籍

1. **按标题搜索**: 适合记得书名的情况
2. **按作者搜索**: 快速找到某位作者的所有作品
3. **按标签搜索**: 查找同类型书籍（如"轻小说"）
4. **收藏排序**: 将重点项目置顶

### 高效管理

1. **定期收藏**: 将正在翻译的书籍标为收藏
2. **善用标签**: 为书籍添加分类标签方便筛选
3. **及时备份**: 使用导出功能定期备份书籍数据

### 批量导入

处理大量书籍时：

1. 使用 **从网站导入** 自动获取元数据
2. 使用 **从 JSON 导入** 批量导入已导出的书籍
3. 导入后使用搜索和排序功能快速检查

### 字数统计优化

- 字数统计是异步计算的，首次加载会有短暂延迟
- 刷新页面会重新计算所有字数
- 统计包括所有卷和章节的字符总数

---

## ❓ 常见问题

**Q: 搜索不到某本书怎么办？**

A: 检查以下几点：

- 搜索词是否输入正确（支持模糊搜索）
- 书籍是否真的存在（查看总数统计）
- 尝试按作者或标签搜索
- 清除搜索后浏览完整列表

**Q: 字数统计显示不准确？**

A: 字数是异步计算的，可能存在延迟：

- 等待几秒让统计完成
- 刷新页面重新加载
- 如果持续不准，可能是章节数据异常

**Q: 删除书籍后能恢复吗？**

A: 可以，但有时间限制：

- 删除后立即在提示中点击 **撤销** 可恢复
- 提示关闭后无法撤销
- 建议定期导出备份重要书籍

**Q: 导入书籍时出错怎么办？**

A: 根据导入方式检查：

- **网站导入**: 确认 URL 正确且网站可访问
- **JSON 导入**: 验证 JSON 格式是否正确
- 查看错误提示了解具体原因

**Q: 如何批量导出书籍？**

A: 目前支持单本导出，批量导出功能：

- 在书籍详情页可导出单本书籍的 JSON
- 使用 Github Gist 同步功能实现云端备份

**Q: 卡片上的封面能更换吗？**

A: 可以：

1. 点击书籍的 **编辑** 按钮
2. 在封面区域上传新图片或粘贴 URL
3. 保存后封面会立即更新

**Q: 为什么有的书籍没有封面？**

A: 封面是可选的：

- 手动添加的书籍默认使用占位图
- 从网站导入的书籍会自动抓取封面
- 您可以随时编辑添加自定义封面

**Q: "更新时间"是如何计算的？**

A: 更新时间会在以下操作时自动更新：

- 编辑书籍信息
- 添加或修改章节
- 进行翻译、润色等操作

---

## ⚙️ 相关设置

### 封面管理

系统会自动记录您使用过的封面，在 **封面历史** 中可以：

- 查看所有使用过的封面
- 快速复用以前的封面
- 删除不需要的封面记录

### 数据备份

建议配置 **Github Gist 同步** 实现自动云端备份：

1. 打开设置（顶部工具栏）
2. 进入 **数据同步** 选项卡
3. 配置 Github Token 和 Gist ID
4. 启用自动同步

---

## 🎯 最佳实践

1. **使用收藏标记活跃项目**: 方便快速访问正在翻译的书籍

2. **合理使用标签**: 为不同类型的书籍添加标签，如"轻小说"、"网文"、"奇幻"

3. **定期清理**: 删除不再需要的测试书籍或已完成的项目

4. **善用搜索**: 书籍较多时, 使用搜索比滚动浏览更高效

5. **导入前检查**: 从网站导入时，先预览信息再确认导入

6. **备份重要数据**: 使用 JSON 导出或 Github Gist 同步定期备份

7. **分批导入大型作品**: 章节很多的书籍建议分卷导入，避免一次性加载过多内容

8. **利用撤销功能**: 误操作后及时点击提示中的"撤销"按钮恢复
