# 📚 章节管理详解

书籍详情页提供了强大的章节结构管理功能,包括卷和章节的创建、编辑、删除和排序。

## 📖 卷和章节的概念

### 卷 (Volume)

卷是章节的容器,用于组织和分类章节。一本书可以包含多个卷,每个卷可以包含多个章节。

**使用场景**:

- 小说的不同部分(如第一卷、第二卷)
- 按故事线分组的章节
- 按主题分类的内容

### 章节 (Chapter)

章节是书籍的基本内容单元,包含原文和译文。每个章节必须属于某个卷。

## ➕ 添加卷

### 操作步骤

1. 在左侧边栏找到"卷和章节"区域
2. 点击"添加卷"按钮(➕ 图标)
3. 在弹出的对话框中输入卷标题
4. 点击"添加"按钮完成创建

### 卷的命名建议

- **使用有意义的标题**: 如"第一卷:起源"、"序章"等
- **保持命名风格一致**: 统一使用"第X卷"或"卷X"的格式
- **包含关键信息**: 可以在标题中体现卷的主题或时间线

### 快捷操作

- 新创建的卷会自动展开
- 卷会按创建顺序排列在列表中
- 可以通过拖拽调整卷的顺序

## ➕ 添加章节

### 操作步骤

1. 在左侧边栏找到"卷和章节"区域
2. 点击"添加章节"按钮(文档 ➕ 图标)
3. 在弹出的对话框中:
   - 输入章节标题
   - 选择所属的卷
4. 点击"添加"按钮完成创建

### 章节标题的建议

- **使用章节编号**: 如"第一章"、"Chapter 1"
- **添加章节名称**: 如"第一章:新的开始"
- **保持格式统一**: 在整本书中使用相同的命名格式

### 快捷添加

- 在卷的操作菜单中选择"添加章节",会自动选中该卷
- 新章节会添加到所选卷的末尾
- 可以通过拖拽调整章节在卷内的顺序

## ✏️ 编辑卷

### 操作步骤

1. 在卷标题旁边点击"更多"按钮(⋮ 图标)
2. 选择"编辑卷"
3. 在弹出的对话框中修改:
   - **卷标题**: 卷的原文标题
   - **卷译名**: 卷的译文标题(可选)
4. 点击"保存"按钮

### 编辑建议

- **原文与译文分离**: 保持原文标题不变,在译名字段填写译文
- **统一翻译风格**: 确保所有卷的译名风格一致
- **保留原文参考**: 即使提供译名,原文标题仍会在某些地方显示

### 卷的显示规则

- 如果有译名,优先显示"译名 (原文)"
- 如果没有译名,只显示原文标题
- 在编辑模式下,可以同时查看和修改原文与译文

## ✏️ 编辑章节

### 操作步骤

1. 在章节标题旁边点击"更多"按钮(⋮ 图标)
2. 选择"编辑章节"
3. 在弹出的对话框中修改:
   - **章节标题**: 章节的原文标题
   - **章节译名**: 章节的译文标题(可选)
   - **所属卷**: 可以将章节移动到其他卷
   - **特殊指令**: 为该章节设置特定的翻译、润色或校对指令
4. 点击"保存"按钮

### 章节特殊指令

特殊指令允许您为特定章节自定义 AI 翻译行为:

**翻译指令** (Translation Instructions):

- 在常规翻译指令基础上添加的额外要求
- 适用场景: 该章节包含特殊术语、方言或文化元素

**润色指令** (Polish Instructions):

- 调整润色的侧重点
- 适用场景: 该章节需要特别强调某种风格

**校对指令** (Proofreading Instructions):

- 指定校对时需要特别注意的方面
- 适用场景: 该章节有特定的格式要求

### 移动章节到其他卷

1. 在编辑章节对话框中
2. 在"所属卷"下拉菜单中选择目标卷
3. 保存后章节会移动到新的卷中

**注意事项**:

- 移动后章节会添加到目标卷的末尾
- 可以使用撤销功能恢复移动操作
- 移动不会丢失章节的内容和翻译

## 🗑️ 删除卷

### 操作步骤

1. 在卷标题旁边点击"更多"按钮(⋮ 图标)
2. 选择"删除卷"
3. 在确认对话框中确认删除

### 删除规则

- **只能删除空卷**: 卷内必须没有任何章节才能删除
- **先移动章节**: 如果卷内有章节,需要先将章节移动到其他卷或删除
- **不可撤销**: 删除卷的操作无法通过撤销功能恢复

### 安全删除流程

1. 检查卷内是否有重要章节
2. 将需要保留的章节移动到其他卷
3. 确认卷已清空
4. 执行删除操作

## 🗑️ 删除章节

### 操作步骤

1. 在章节标题旁边点击"更多"按钮(⋮ 图标)
2. 选择"删除章节"
3. 在确认对话框中确认删除

### 删除影响

- **永久删除**: 章节的原文、译文、摘要等所有数据都会被删除
- **无法恢复**: 删除后无法通过撤销功能恢复
- **释放空间**: 删除章节会释放存储空间

### 删除前的检查清单

- ✓ 确认不再需要该章节的内容
- ✓ 导出重要的译文内容(如需备份)
- ✓ 检查是否有其他章节引用该章节

## 🔄 拖拽排序

### 同一卷内排序

**操作步骤**:

1. 在左侧章节列表中找到要移动的章节
2. 按住鼠标左键拖拽章节
3. 移动到目标位置
4. 松开鼠标完成排序

**视觉反馈**:

- 拖拽时章节会半透明显示
- 目标位置会显示插入线
- 不可放置的区域会显示禁止图标

### 跨卷移动章节

**操作步骤**:

1. 按住鼠标左键拖拽章节
2. 拖动到目标卷的章节列表上
3. 选择插入位置
4. 松开鼠标完成移动

**注意事项**:

- 可以将章节放置在目标卷的任意位置
- 拖拽操作支持撤销
- 跨卷移动后会保留章节的所有内容

### 卷的排序

**操作步骤**:

1. 拖拽卷标题区域
2. 移动到目标位置
3. 松开鼠标完成排序

**影响**:

- 卷的顺序会影响章节导出时的顺序
- 建议按照阅读顺序排列卷

## 📂 折叠和展开

### 单个卷的折叠/展开

- 点击卷标题旁的箭头图标
- 折叠后隐藏卷内的所有章节
- 再次点击可展开卷

### 折叠的好处

- **减少视觉混乱**: 隐藏不需要关注的章节
- **提高导航效率**: 快速定位到目标卷
- **节省屏幕空间**: 在有限的空间内显示更多卷

### 记忆功能

- 系统会记住每个卷的展开/折叠状态
- 刷新页面后状态会保持
- 切换到其他书籍后状态会重置

## 章节列表的视觉提示

### 章节状态图标

- **翻译中**: 显示进度图标
- **已完成**: 显示勾选图标
- **有错误**: 显示警告图标

### 章节状态颜色

- **未翻译**: 默认颜色
- **部分翻译**: 中间色调
- **完全翻译**: 高亮颜色

### 悬停提示

- 将鼠标悬停在章节上可以显示更多信息
- 包括字数、翻译进度、最后编辑时间等

## 🔧 批量操作

虽然当前版本不支持勾选多个章节进行批量操作,但可以通过以下方式提高效率:

### 使用撤销/重做

- 连续的操作可以一次性撤销
- 建议在进行大量调整前先备份

### 使用在线获取更新

- 自动合并新增的章节和卷
- 无需手动逐个添加

### 规划章节结构

- 在开始翻译前先规划好卷和章节的结构
- 减少后期调整的工作量

## 💡 最佳实践

### 章节结构设计

1. **清晰的层级**: 使用卷来组织章节,避免单个卷包含过多章节
2. **有意义的命名**: 使用描述性的卷和章节名称
3. **保持一致性**: 在整本书中使用统一的命名和编号规则

### 章节管理流程

1. **先创建结构**: 先创建所有卷,再添加章节
2. **逐步填充内容**: 按照阅读顺序逐章翻译
3. **定期整理**: 定期检查和调整章节顺序

### 避免常见错误

- ❌ 在一个卷中放置过多章节(建议不超过50章)
- ❌ 频繁移动已翻译的章节(可能影响引用关系)
- ❌ 删除章节前未备份重要内容
- ✓ 使用撤销功能尝试调整
- ✓ 在大规模调整前先导出当前状态
- ✓ 保持卷和章节结构简洁清晰

## ❓ 常见问题

### 为什么不能删除卷?

卷内还有章节。请先将章节移动到其他卷或删除章节,然后再删除卷。

### 拖拽章节时没有反应?

请确保:

1. 鼠标按住章节标题区域
2. 移动鼠标到有效的放置位置
3. 不要拖拽得过快

### 章节顺序乱了怎么办?

1. 使用撤销功能恢复上一次的顺序
2. 或手动拖拽章节到正确位置
3. 如果撤销不可用,建议参考原文网站重新排序

### 如何快速创建多个章节?

目前需要逐个创建章节。建议:

1. 使用"从在线获取更新"功能自动导入章节
2. 或先创建一个章节,然后复制修改

### 可以批量导入章节结构吗?

可以通过导入书籍功能(如JSON或EPUB格式)来批量导入章节结构。具体请参考"导入导出功能"指南。
